<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#2b2a27" />
		<title>Cozy Notes — September Vibes</title>
		<meta name="description" content="A cozy, visually stunning notes app with subtle falling leaves and September vibes." />

		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet" />

		<link rel="stylesheet" href="./styles.css" />
		<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
				<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/atom-one-dark.min.css">
				<script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/highlight.min.js"></script>
				<script>
					// Configure Marked to use highlight.js
					if (window.marked) {
						marked.setOptions({
							highlight(code, lang) {
								try {
									if (lang && hljs.getLanguage(lang)) {
										return hljs.highlight(code, { language: lang }).value;
									}
								} catch {}
								try {
									return hljs.highlightAuto(code).value;
								} catch {
									return code;
								}
							}
						});
					}
				</script>
	</head>
	<body>
		<div id="parallax-bg"></div>
		<noscript>You need to enable JavaScript to run this app.</noscript>

		<!-- Falling leaves background container -->
		<div id="leaves-layer" aria-hidden="true"></div>

		<div id="app" class="app">
			<aside class="sidebar">
				<div class="brand">
					<div class="logo" aria-hidden="true">
						<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22a10 10 0 0 0 10-10c0-2-1-4-3-5s-4-1-6-1-4 0-6 1-3 3-3 5a10 10 0 0 0 10 10z"></path><path d="m12 2-3 3"></path><path d="m15 5-3-3"></path><path d="m9 5 3-3"></path></svg>
					</div>
					<div class="brand-text">
						<h1>Cozy Notes</h1>
						<p>September vibes</p>
					</div>
				</div>

				<div class="sidebar-controls">
					<div class="search">
						<input id="searchInput" type="search" placeholder="Search notes..." autocomplete="off" />
					</div>
					<button id="newNoteBtn" class="btn primary">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
						New note
					</button>
				</div>

				<ul id="notesList" class="notes-list" role="list" aria-label="Notes list">
					<!-- Notes will render here -->
				</ul>
			</aside>

			<main class="editor" aria-live="polite">
				<header class="editor-header">
					<input id="titleInput" class="title-input" type="text" placeholder="Untitled note" />
					<div class="editor-actions">
						<span id="saveStatus" class="save-status" aria-live="polite" aria-atomic="true"></span>
						<div id="viewControls" class="view-controls">
							<button id="viewSplitBtn" class="btn subtle active" title="Split View">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="3" x2="12" y2="21"></line></svg>
							</button>
							<button id="viewEditorBtn" class="btn subtle" title="Editor Only">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
							</button>
							<button id="viewPreviewBtn" class="btn subtle" title="Preview Only">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
							</button>
						</div>
						<button id="pinBtn" class="btn subtle" title="Pin/Unpin">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
						</button>
						<button id="deleteBtn" class="btn danger" title="Delete note">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
						</button>
					</div>
				</header>
				<section class="md-toolbar" aria-label="Formatting toolbar">
					<button class="tb-btn" data-cmd="bold" title="Bold (Ctrl+B)"><strong>B</strong></button>
					<button class="tb-btn" data-cmd="italic" title="Italic (Ctrl+I)"><em>I</em></button>
					<button class="tb-btn" data-cmd="code" title="Inline code">{ }</button>
					<span class="tb-sep"></span>
					<button class="tb-btn" data-cmd="h1" title="Heading 1">H1</button>
					<button class="tb-btn" data-cmd="h2" title="Heading 2">H2</button>
					<button class="tb-btn" data-cmd="h3" title="Heading 3">H3</button>
					<span class="tb-sep"></span>
					<button class="tb-btn" data-cmd="link" title="Link">🔗</button>
					<button class="tb-btn" data-cmd="quote" title="Quote">❝❞</button>
					<button class="tb-btn" data-cmd="hr" title="Horizontal rule">—</button>
					<span class="tb-sep"></span>
					<button class="tb-btn" data-cmd="ul" title="Bulleted list">• List</button>
					<button class="tb-btn" data-cmd="ol" title="Numbered list">1. List</button>
					<button class="tb-btn" data-cmd="task" title="Task list">[ ] Task</button>
					<span class="tb-sep"></span>
					<button class="tb-btn" data-cmd="codeblock" title="Code block">```</button>
				</section>

				<section id="editorBody" class="editor-body">
					<textarea id="contentInput" class="content-input" placeholder="Start writing your cozy thoughts..."></textarea>
					<div id="previewOutput" class="preview-output"></div>
				</section>
			</main>
		</div>

		<footer class="footer">
			<small>Made with ☕, 🍂, and warm hues.</small>
		</footer>

		<!-- Snackbar for undo notifications -->
		<div id="snackbar" class="snackbar" role="status" aria-live="polite" aria-atomic="true"></div>

		<script src="./app.js" defer></script>
	</body>
</html>
